class ColorConverter{static getGamutRanges(){return{gamutA:{red:[.704,.296],green:[.2151,.7106],blue:[.138,.08]},gamutB:{red:[.675,.322],green:[.409,.518],blue:[.167,.04]},gamutC:{red:[.692,.308],green:[.17,.7],blue:[.153,.048]},default:{red:[1,0],green:[0,1],blue:[0,0]}}}static getLightColorGamutRange(l=null){let e=ColorConverter.getGamutRanges(),t=e.gamutA,r=e.gamutB,a=e.gamutC,C={LST001:t,LLC010:t,LLC011:t,LLC012:t,LLC006:t,LLC005:t,LLC007:t,LLC014:t,LLC013:t,LCT001:r,LCT007:r,LCT002:r,LCT003:r,LLM001:r,LCT010:a,LCT014:a,LCT015:a,LCT016:a,LCT011:a,LLC020:a,LST002:a,LCT012:a};return C[l]?C[l]:e.default}static rgbToXy(l,e,t,r=null){function a(o){return o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92}let C=ColorConverter.getLightColorGamutRange(r);l=parseFloat(l/255),e=parseFloat(e/255),t=parseFloat(t/255);let s=.649926*(l=a(l))+.103455*(e=a(e))+.197109*(t=a(t)),d=.234327*l+.743075*e+.022598*t,g=0*l+.053077*e+1.035763*t,u={x:s/(s+d+g),y:d/(s+d+g)};return ColorConverter.xyIsInGamutRange(u,C)||(u=ColorConverter.getClosestColor(u,C)),u}static xyIsInGamutRange(l,e){e=e||ColorConverter.getGamutRanges().gamutC,Array.isArray(l)&&(l={x:l[0],y:l[1]});let t=[e.blue[0]-e.red[0],e.blue[1]-e.red[1]],r=[e.green[0]-e.red[0],e.green[1]-e.red[1]],a=[l.x-e.red[0],l.y-e.red[1]],C=t[0]*t[0]+t[1]*t[1],s=t[0]*r[0]+t[1]*r[1],d=t[0]*a[0]+t[1]*a[1],g=r[0]*r[0]+r[1]*r[1],u=r[0]*a[0]+r[1]*a[1],o=1/(C*g-s*s),n=(g*d-s*u)*o,L=(C*u-s*d)*o;return n>=0&&L>=0&&n+L<1}static getClosestColor(l,e){function t(n,L){return Math.hypot(L.x-n.x,L.y-n.y)}function r(n,L,y){let i=[n.x-L.x,n.y-L.y],b=[y.x-L.x,y.y-L.y],x=Math.pow(b[0],2)+Math.pow(b[1],2),c=(i[0]*b[0]+i[1]*b[1])/x;return{x:L.x+b[0]*c,y:L.y+b[1]*c}}let u,o,a={a:{x:e.green[0],y:e.green[1]},b:{x:e.blue[0],y:e.blue[1]}},C={a:{x:e.green[0],y:e.green[1]},b:{x:e.red[0],y:e.red[1]}},s={a:{x:e.red[0],y:e.red[1]},b:{x:e.blue[0],y:e.blue[1]}},d={greenBlue:r(l,a.a,a.b),greenRed:r(l,C.a,C.b),blueRed:r(l,s.a,s.b)},g={greenBlue:t(l,d.greenBlue),greenRed:t(l,d.greenRed),blueRed:t(l,d.blueRed)};for(let n in g)g.hasOwnProperty(n)&&(u||(u=g[n],o=n),u>g[n]&&(u=g[n],o=n));return d[o]}static xyBriToRgb(l,e,t){function r(b){return b<=.0031308?12.92*b:1.055*Math.pow(b,1/2.4)-.055}let s=t/255,d=s/e*l,g=s/e*(1-l-e),u=1.656492*d-.354851*s-.255038*g,o=.707196*-d+1.655397*s+.036152*g,n=.051713*d-.121364*s+1.01153*g;u=r(u),o=r(o),n=r(n);let L=parseInt(255*u)>255?255:parseInt(255*u),y=parseInt(255*o)>255?255:parseInt(255*o),i=parseInt(255*n)>255?255:parseInt(255*n);return L=Math.abs(L),y=Math.abs(y),i=Math.abs(i),{r:L,g:y,b:i}}}module.exports=ColorConverter;