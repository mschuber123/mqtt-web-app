class ColorConverter{static getLightColorGamutRange(e=null){let r={red:[.704,.296],green:[.2151,.7106],blue:[.138,.08]},t={red:[.675,.322],green:[.409,.518],blue:[.167,.04]},n={red:[.692,.308],green:[.17,.7],blue:[.153,.048]},o={LST001:r,LLC010:r,LLC011:r,LLC012:r,LLC006:r,LLC005:r,LLC007:r,LLC014:r,LLC013:r,LCT001:t,LCT007:t,LCT002:t,LCT003:t,LLM001:t,LCT010:n,LCT014:n,LCT015:n,LCT016:n,LCT011:n,LLC020:n,LST002:n,LCT012:n};return o[e]?o[e]:{red:[1,0],green:[0,1],blue:[0,0]}}static rgbToXy(e,r,t,n=null){function o(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}let l=ColorConverter.getLightColorGamutRange(n);e=parseFloat(e/255),r=parseFloat(r/255),t=parseFloat(t/255);let a=.649926*(e=o(e))+.103455*(r=o(r))+.197109*(t=o(t)),C=.234327*e+.743075*r+.022598*t,u=0*e+.053077*r+1.035763*t,L={x:a/(a+C+u),y:C/(a+C+u)};return ColorConverter.xyIsInGamutRange(L,l)||(L=ColorConverter.getClosestColor(L,l)),L}static xyIsInGamutRange(e,r){r=r||ColorConverter.gamutC(),Array.isArray(e)&&(e={x:e[0],y:e[1]});let t=[r.blue[0]-r.red[0],r.blue[1]-r.red[1]],n=[r.green[0]-r.red[0],r.green[1]-r.red[1]],o=[e.x-r.red[0],e.y-r.red[1]],l=t[0]*t[0]+t[1]*t[1],a=t[0]*n[0]+t[1]*n[1],C=t[0]*o[0]+t[1]*o[1],u=n[0]*n[0]+n[1]*n[1],L=n[0]*o[0]+n[1]*o[1],g=1/(l*u-a*a),s=(u*C-a*L)*g,y=(l*L-a*C)*g;return s>=0&&y>=0&&s+y<1}static getClosestColor(e,r){function t(e,r){return Math.hypot(r.x-e.x,r.y-e.y)}function n(e,r,t){let n=[e.x-r.x,e.y-r.y],o=[t.x-r.x,t.y-r.y],l=Math.pow(o[0],2)+Math.pow(o[1],2),a=(n[0]*o[0]+n[1]*o[1])/l;return{x:r.x+o[0]*a,y:r.y+o[1]*a}}let o,l,a={a:{x:r.green[0],y:r.green[1]},b:{x:r.blue[0],y:r.blue[1]}},C={a:{x:r.green[0],y:r.green[1]},b:{x:r.red[0],y:r.red[1]}},u={a:{x:r.red[0],y:r.red[1]},b:{x:r.blue[0],y:r.blue[1]}},L={greenBlue:n(e,a.a,a.b),greenRed:n(e,C.a,C.b),blueRed:n(e,u.a,u.b)},g={greenBlue:t(e,L.greenBlue),greenRed:t(e,L.greenRed),blueRed:t(e,L.blueRed)};for(let s in g)g.hasOwnProperty(s)&&(o||(o=g[s],l=s),o>g[s]&&(o=g[s],l=s));return L[l]}static xyBriToRgb(e,r,t){function n(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}let o=t/255,l=o/r*e,a=o/r*(1-e-r),C=1.656492*l-.354851*o-.255038*a,u=.707196*-l+1.655397*o+.036152*a,L=.051713*l-.121364*o+1.01153*a;return C=n(C),u=n(u),L=n(L),{r:parseInt(255*C)>255?255:parseInt(255*C),g:parseInt(255*u)>255?255:parseInt(255*u),b:parseInt(255*L)>255?255:parseInt(255*L)}}}module.exports=ColorConverter;